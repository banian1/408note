# 🚦 流量控制 & ✅ 可靠传输机制

---

## 1️⃣ 停止-等待协议（Stop-and-Wait）

每发送一个数据帧，**发送方必须等待确认**（ACK）才能继续发送下一个帧。
### ✅ 特点

- 实现简单
- 每次只发送一个帧
### ❌ 缺点

- **信道利用率低**，尤其是在**信道时延大**的情况下
- 传输效率低，等待时间浪费严重

---

## 2️⃣ 滑动窗口协议（Sliding Window）

发送方和接收方都维护一个窗口，用于控制可以发送或接收的帧数量，实现**连续帧传输 + 有序确认**。

---

### 📦 后退 N 帧协议（Go-Back-N, GBN）

#### ✅ 机制要点：

1. 若采用 n 位帧编号，则**发送窗口最大值**：
$$1\le W_t \le 2^{n - 1}$$
2. **接收窗口大小为 1**（即接收方只接收按序到达的帧）
3. 使用**累计确认**（如 ACK 5 表示“已成功接收编号 ≤ 5 的所有帧”）

#### ❌ 缺点：
- **确认丢失/帧丢失后，需重传之后所有帧**（哪怕它们是正确的）
- 会造成**冗余重传**

---

### 📦 选择重传协议（Selective Repeat, SR）

#### ✅ 机制要点：

1. 对每个帧**单独确认**，收一个 ACK 一个
2. 只需**重传出错帧**，无需重传整个窗口内容
3. 设计要求发送窗口 = 接收窗口，窗口最大值为：
$$WTmax⁡=WRmax⁡=2n−1W_{T_{\max}} = W_{R_{\max}} = 2^{n - 1}WTmax​​=WRmax​​=2n−1$$
#### ✅ 优点：
- 提高效率，减少不必要重传
- 更适合高误码率信道
#### ❌ 缺点：
- 实现复杂（需要缓存乱序帧并排序）

## 信道利用率
$$U=\dfrac{nT_D}{T_D+\mathrm{RTT}+T_A}$$